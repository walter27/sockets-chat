"use strict";var params=new URLSearchParams(window.location.search),nombre=params.get("nombre"),divUusarios=$("#divUsuarios"),formEnviar=$("#formEnviar"),txtMensaje=$("#txtMensaje"),divChatbox=$("#divChatbox");function renderizarUusarios(a){console.log(a);var s="";s+=" <li>",s+=' <a href="javascript:void(0)" class="active"> Chat de <span>'+params.get("sala")+"</span></a>",s+=" </li>";for(var i=0;i<a.length;i++)s+=" <li>",s+='     <a data-id="'+a[i].id+'" href = "javascript:void(0)" > <img src="assets/images/users/1.jpg" alt="user-img" class="img-circle"> <span>'+a[i].nombre+'<small class="text-success">online</small></span></a>',s+=" </li>";divUusarios.html(s)}function renderizarMensaje(a,s){var i="",e=new Date(a.fecha),t=e.getHours()+":"+e.getMinutes(),r="info";"Administrador"===a.nombre&&(r="danger",console.log(a.nombre)),s?(i+='<li class="reverse">',i+='<div class="chat-content">',i+="<h5>"+a.nombre+"</h5>",i+='<div class="box bg-light-inverse">'+a.mensaje+" </div>",i+="</div>",i+='<div class="chat-img"><img src="assets/images/users/5.jpg" alt="user" />',i+="</div>",i+='<div class="chat-time">'+t+"</div>",i+="</li>"):(i+=' <li class="animated fadeIn">',"Administrador"!==a.nombre&&(i+=' <div class="chat-img"><img src="assets/images/users/1.jpg" alt="user" /></div>'),i+=' <div class="chat-content">',i+=" <h5>"+a.nombre+"</h5>",i+=' <div class="box bg-light-'+r+'">'+a.mensaje+"</div>",i+=" </div>",i+=' <div class="chat-time">'+t+"</div>",i+=" </li>"),divChatbox.append(i)}function scrollBottom(){var a=divChatbox.children("li:last-child"),s=divChatbox.prop("clientHeight"),i=divChatbox.prop("scrollTop"),e=divChatbox.prop("scrollHeight");e<=s+i+a.innerHeight()+(a.prev().innerHeight()||0)&&divChatbox.scrollTop(e)}divUusarios.on("click","a",function(){var a=$(this).data("id");condition,console.log(a)}),formEnviar.on("submit",function(a){a.preventDefault(),0!==txtMensaje.val().trim().length&&socket.emit("crearMensaje",{nombre:nombre,mensaje:txtMensaje.val()},function(a){txtMensaje.val("").focus(),renderizarMensaje(a,!0),scrollBottom()})});